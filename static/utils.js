var margin = {top: 20, right: 20, bottom: 20, left: 20},
    width = 900 - margin.left - margin.right,
    height = 600 - margin.top - margin.bottom;
	
var colorMap = d3.scaleSequential(d3.interpolateRdBu)
    .domain([-1, 1]);

var leftSvg = d3.select("#left_div").append("svg")
		.attr("width", width)
		.attr("height", height)

var rightSvg = d3.select("#right_div").append("svg")
		.attr("width", width)
		.attr("height", height)
					
var toolbarSvg = d3.select("#toolBar_div").append("svg")
		.attr("width", document.getElementById("toolBar_div").clientWidth)
		.attr("height", 50)


var topTooltip = d3.select("body")
    .append("div")
    .attr("id", "tooltip1")
    .attr("class", "tooltip")
    .style("position", "absolute")
    .style("z-index", "10")
    .style("visibility", "hidden")
    .text("a simple tooltip");

var bottomTooltip = d3.select("body")
    .append("div")
    .attr("id", "tooltip2")
    .attr("class", "tooltip")
    .style("position", "absolute")
    .style("z-index", "10")
    .style("visibility", "hidden");

var countryDict = {
	'ARGENTINA': 32,
	'AUSTRALIA': 36,
	'AUSTRIA': 40,
	'Argentina': 32,
	'Australia': 36,
	'Austria': 40,
	'BANGLADESH': 50,
	'BELGIUM': 56,
	'BOSNIA-HERZEGOVINA': 70,
	'BRAZIL': 76,
	'BULGARIA': 100,
	'Bangladesh': 50,
	'Belgium': 56,
	'Bosnia and Hercegovina': 70,
	'Brazil': 76,
	'Bulgaria': 100,
	'CANADA': 124,
	'CHILE': 152,
	'CHINA': 156,
	'CHINA (REPUBLIC : 1949- )': 156,
	'CHINA (REPUBLIC : 1949-)': 156,
	'CHINA (REPUBLIC: 1949- )': 156,
	'CROATIA': 191,
	'CUBA': 192,
	'CZECH REPUBLIC': 203,
	'CZECHOSLOVAKIA': 203,
	'Canada': 124,
	'Chile': 152,
	'China': 156,
	'China (Republic : 1949- )': 156,
	'China (Republic : 1949-)': 156,
	'China (Republic: 1949- )': 156,
	'Colombia': 170,
	'Croatia': 191,
	'Cuba': 192,
	'Czech Republic': 203,
	'DENMARK': 208,
	'Denmark': 208,
	'EGYPT': 818,
	'ENGLAND': 826,
	'ETHIOPIA': 231,
	'Egypt': 818,
	'England': 826,
	'Ethiopia': 231,
	'FINLAND': 246,
	'FRANCE': 250,
	'Finland': 246,
	'France': 250,
	'GERMANY': 276,
	'GERMANY, EAST': 276,
	'GERMANY, WEST': 276,
	'GREECE': 300,
	'Georgia (Republic)': 268,
	'Germany': 276,
	'Greece': 300,
	'HONG KONG': 344,
	'HUNGARY': 348,
	'Hungary': 348,
	'INDIA': 356,
	'INDONESIA': 360,
	'IRELAND': 372,
	'ISRAEL': 376,
	'ITAIY': 380,
	'ITALY': 380,
	'Iceland': 352,
	'India': 356,
	'Indonesia': 360,
	'International': 840,
	'Iran': 364,
	'Ireland': 372,
	'Israel': 376,
	'Italy': 380,
	'JAMAICA': 388,
	'JAPAN': 392,
	'Jamaica': 388,
	'Japan': 392,
	'KENYA': 404,
	'KOREA': 410,
	'KOREA (SOUTH)': 410,
	'Kenya': 404,
	'Korea (South)': 410,
	'Kuwait': 414,
	'LEBANON': 422,
	'Lebanon': 422,
	'Lithuania': 440,
	'MALAYSIA': 458,
	'MEXICO': 484,
	'Macedonia': 807,
	'Malawi': 454,
	'Malaysia': 458,
	'Mali': 466,
	'Mexico': 484,
	'NETHERLANDS': 528,
	'NEW ZEALAND': 554,
	'NIGERIA': 566,
	'NORTHERN IRELAND': 826,
	'NORWAY': 578,
	'Nepal': 524,
	'Netherlands': 528,
	'New Zealand': 554,
	'Nigeria': 566,
	'Northern Ireland': 826,
	'Norway': 578,
	'PAKISTAN': 586,
	'PANAMA': 591,
	'PAPUA NEW GUINEA': 598,
	'PERU': 604,
	'PHILIPPINES': 608,
	'POLAND': 616,
	'PORTUGAL': 620,
	'PUERTO RICO': 630,
	'Pakistan': 586,
	'Panama': 591,
	'Papua New Guinea': 598,
	'Peru': 604,
	'Poland': 616,
	'Portugal': 620,
	'Puerto Rico': 630,
	'ROMANIA': 642,
	'RUSSIA': 643,
	'Romania': 642,
	'Russia': 643,
	'Russia (Federation)': 643,
	'SCOTLAND': 826,
	'SENEGAL': 686,
	'SINGAPORE': 702,
	'SLOVAKIA': 703,
	'SOUTH AFRICA': 710,
	'SPAIN': 724,
	'SRI LANKA': 144,
	'SWEDEN': 752,
	'SWITZERLAND': 756,
	'Saudi Arabia': 682,
	'Scotland': 826,
	'Senegal': 686,
	'Serbia': 688,
	'Serbia and Montenegro': 688,
	'Singapore': 702,
	'Slovakia': 703,
	'Slovenia': 705,
	'South Africa': 710,
	'Spain': 724,
	'Sri Lanka': 144,
	'Sweden': 752,
	'Switzerland': 756,
	'TAIWAN': 158,
	'THAILAND': 764,
	'TUNISIA': 788,
	'TURKEY': 792,
	'Tanzania': 834,
	'Thailand': 764,
	'Tunisia': 788,
	'Turkey': 792,
	'UKRAINE': 804,
	'UNITED STATES': 840,
	'URUGUAY': 858,
	'USSR': 643,
	'Uganda': 800,
	'Ukraine': 804,
	'United Arab Emirates': 784,
	'United Kingdom': 826,
	'United States': 840,
	'Unknown': 840,
	'VENEZUELA': 862,
	'Venezuela': 862,
	'Wales': 826,
	'YUGOSLAVIA': 688,
	'Yugoslavia': 688,
	'ZAMBIA': 894,
	'ZIMBABWE': 716,
	'Zimbabwe': 716,
}

var countryNameLookup = new Map([
	[4, "Afghanistan"],
	[8, "Albania"],
	[12, "Algeria"],
	[16, "American Samoa"],
	[20, "Andorra"],
	[24, "Angola"],
	[660, "Anguilla"],
	[10, "Antarctica"],
	[28, "Antigua and Barbuda"],
	[32, "Argentina"],
	[51, "Armenia"],
	[533, "Aruba"],
	[36, "Australia"],
	[40, "Austria"],
	[31, "Azerbaijan"],
	[44, "Bahamas"],
	[48, "Bahrain"],
	[50, "Bangladesh"],
	[52, "Barbados"],
	[112, "Belarus"],
	[56, "Belgium"],
	[84, "Belize"],
	[204, "Benin"],
	[60, "Bermuda"],
	[64, "Bhutan"],
	[68, "Bolivia, Plurinational State of"],
	[68, "Bolivia"],
	[70, "Bosnia and Herzegovina"],
	[72, "Botswana"],
	[74, "Bouvet Island"],
	[76, "Brazil"],
	[86, "British Indian Ocean Territory"],
	[96, "Brunei Darussalam"],
	[96, "Brunei"],
	[100, "Bulgaria"],
	[854, "Burkina Faso"],
	[108, "Burundi"],
	[116, "Cambodia"],
	[120, "Cameroon"],
	[124, "Canada"],
	[132, "Cape Verde"],
	[136, "Cayman Islands"],
	[140, "Central African Republic"],
	[148, "Chad"],
	[152, "Chile"],
	[156, "China"],
	[162, "Christmas Island"],
	[166, "Cocos (Keeling) Islands"],
	[170, "Colombia"],
	[174, "Comoros"],
	[178, "Congo"],
	[180, "Congo, the Democratic Republic of the"],
	[184, "Cook Islands"],
	[188, "Costa Rica"],
	[384, "Côte d'Ivoire"],
	[384, "Ivory Coast"],
	[191, "Croatia"],
	[192, "Cuba"],
	[196, "Cyprus"],
	[203, "Czech Republic"],
	[208, "Denmark"],
	[262, "Djibouti"],
	[212, "Dominica"],
	[214, "Dominican Republic"],
	[218, "Ecuador"],
	[818, "Egypt"],
	[222, "El Salvador"],
	[226, "Equatorial Guinea"],
	[232, "Eritrea"],
	[233, "Estonia"],
	[231, "Ethiopia"],
	[238, "Falkland Islands (Malvinas)"],
	[234, "Faroe Islands"],
	[242, "Fiji"],
	[246, "Finland"],
	[250, "France"],
	[254, "French Guiana"],
	[258, "French Polynesia"],
	[260, "French Southern Territories"],
	[266, "Gabon"],
	[270, "Gambia"],
	[268, "Georgia"],
	[276, "Germany"],
	[288, "Ghana"],
	[292, "Gibraltar"],
	[300, "Greece"],
	[304, "Greenland"],
	[308, "Grenada"],
	[312, "Guadeloupe"],
	[316, "Guam"],
	[320, "Guatemala"],
	[831, "Guernsey"],
	[324, "Guinea"],
	[624, "Guinea-Bissau"],
	[328, "Guyana"],
	[332, "Haiti"],
	[334, "Heard Island and McDonald Islands"],
	[336, "Holy See (Vatican City State)"],
	[340, "Honduras"],
	[344, "Hong Kong"],
	[348, "Hungary"],
	[352, "Iceland"],
	[356, "India"],
	[360, "Indonesia"],
	[364, "Iran, Islamic Republic of"],
	[368, "Iraq"],
	[372, "Ireland"],
	[833, "Isle of Man"],
	[376, "Israel"],
	[380, "Italy"],
	[388, "Jamaica"],
	[392, "Japan"],
	[832, "Jersey"],
	[400, "Jordan"],
	[398, "Kazakhstan"],
	[404, "Kenya"],
	[296, "Kiribati"],
	[408, "Korea, Democratic People's Republic of"],
	[410, "Korea, Republic of"],
	[410, "South Korea"],
	[414, "Kuwait"],
	[417, "Kyrgyzstan"],
	[418, "Lao People's Democratic Republic"],
	[428, "Latvia"],
	[422, "Lebanon"],
	[426, "Lesotho"],
	[430, "Liberia"],
	[434, "Libyan Arab Jamahiriya"],
	[434, "Libya"],
	[438, "Liechtenstein"],
	[440, "Lithuania"],
	[442, "Luxembourg"],
	[446, "Macao"],
	[807, "Macedonia, the former Yugoslav Republic of"],
	[450, "Madagascar"],
	[454, "Malawi"],
	[458, "Malaysia"],
	[462, "Maldives"],
	[466, "Mali"],
	[470, "Malta"],
	[584, "Marshall Islands"],
	[474, "Martinique"],
	[478, "Mauritania"],
	[480, "Mauritius"],
	[175, "Mayotte"],
	[484, "Mexico"],
	[583, "Micronesia, Federated States of"],
	[498, "Moldova, Republic of"],
	[492, "Monaco"],
	[496, "Mongolia"],
	[499, "Montenegro"],
	[500, "Montserrat"],
	[504, "Morocco"],
	[508, "Mozambique"],
	[104, "Myanmar"],
	[104, "Burma"],
	[516, "Namibia"],
	[520, "Nauru"],
	[524, "Nepal"],
	[528, "Netherlands"],
	[530, "Netherlands Antilles"],
	[540, "New Caledonia"],
	[554, "New Zealand"],
	[558, "Nicaragua"],
	[562, "Niger"],
	[566, "Nigeria"],
	[570, "Niue"],
	[574, "Norfolk Island"],
	[580, "Northern Mariana Islands"],
	[578, "Norway"],
	[512, "Oman"],
	[586, "Pakistan"],
	[585, "Palau"],
	[275, "Palestinian Territory, Occupied"],
	[591, "Panama"],
	[598, "Papua New Guinea"],
	[600, "Paraguay"],
	[604, "Peru"],
	[608, "Philippines"],
	[612, "Pitcairn"],
	[616, "Poland"],
	[620, "Portugal"],
	[630, "Puerto Rico"],
	[634, "Qatar"],
	[638, "Réunion"],
	[642, "Romania"],
	[643, "Russian Federation"],
	[643, "Russia"],
	[646, "Rwanda"],
	[654, "Saint Helena, Ascension and Tristan da Cunha"],
	[659, "Saint Kitts and Nevis"],
	[662, "Saint Lucia"],
	[666, "Saint Pierre and Miquelon"],
	[670, "Saint Vincent and the Grenadines"],
	[670, "Saint Vincent & the Grenadines"],
	[670, "St. Vincent and the Grenadines"],
	[882, "Samoa"],
	[674, "San Marino"],
	[678, "Sao Tome and Principe"],
	[682, "Saudi Arabia"],
	[686, "Senegal"],
	[688, "Serbia"],
	[690, "Seychelles"],
	[694, "Sierra Leone"],
	[702, "Singapore"],
	[703, "Slovakia"],
	[705, "Slovenia"],
	[90, "Solomon Islands"],
	[706, "Somalia"],
	[710, "South Africa"],
	[239, "South Georgia and the South Sandwich Islands"],
	[724, "Spain"],
	[144, "Sri Lanka"],
	[736, "Sudan"],
	[740, "Suriname"],
	[744, "Svalbard and Jan Mayen"],
	[748, "Swaziland"],
	[752, "Sweden"],
	[756, "Switzerland"],
	[760, "Syrian Arab Republic"],
	[158, "Taiwan, Province of China"],
	[158, "Taiwan"],
	[762, "Tajikistan"],
	[834, "Tanzania, United Republic of"],
	[764, "Thailand"],
	[626, "Timor-Leste"],
	[768, "Togo"],
	[772, "Tokelau"],
	[776, "Tonga"],
	[780, "Trinidad and Tobago"],
	[780, "Trinidad & Tobago"],
	[788, "Tunisia"],
	[792, "Turkey"],
	[795, "Turkmenistan"],
	[796, "Turks and Caicos Islands"],
	[798, "Tuvalu"],
	[800, "Uganda"],
	[804, "Ukraine"],
	[784, "United Arab Emirates"],
	[826, "United Kingdom"],
	[840, "United States"],
	[581, "United States Minor Outlying Islands"],
	[858, "Uruguay"],
	[860, "Uzbekistan"],
	[548, "Vanuatu"],
	[862, "Venezuela, Bolivarian Republic of"],
	[862, "Venezuela"],
	[704, "Viet Nam"],
	[704, "Vietnam"],
	[92, "Virgin Islands, British"],
	[850, "Virgin Islands, U.S."],
	[876, "Wallis and Futuna"],
	[732, "Western Sahara"],
	[887, "Yemen"],
	[894, "Zambia"],
	[716, "Zimbabwe"],
]);
